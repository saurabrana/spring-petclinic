{
    "alerts": [
        {
            "name": "CrashController Exception Monitoring",
            "description": "Monitors the occurrence of internal server errors triggered by the CrashController endpoint.",
            "query": "SELECT count(*) FROM Transaction WHERE appName = 'PetClinic' AND request.uri = '/oups' AND httpResponseCode = '500'",
            "operator": "above",
            "duration": "5",
            "threshold": "0",
            "priority": "critical",
            "rationale": "A 500 error on the /oups endpoint indicates an unhandled exception in the CrashController, potentially leading to a poor user experience."
        },
        {
            "name": "Owner Creation Errors",
            "description": "Tracks form submission errors when creating a new owner, indicating potential issues with input validation.",
            "query": "SELECT count(*) FROM Transaction WHERE appName = 'PetClinic' AND request.uri = '/owners/new' AND error IS true",
            "operator": "above",
            "duration": "10",
            "threshold": "5",
            "priority": "warning",
            "rationale": "Frequent errors during owner creation may indicate problems with the user interface or backend validation logic affecting user satisfaction."
        },
        {
            "name": "High Database Query Load",
            "description": "Monitors the transaction volume for database queries, reflecting high load on the database.",
            "query": "SELECT count(*) FROM Transaction WHERE appName = 'PetClinic' AND databaseCallCount > 5",
            "operator": "above",
            "duration": "1",
            "threshold": "100",
            "priority": "critical",
            "rationale": "High database query volumes can indicate performance degradation due to database constraints or inefficient queries impacting the overall app performance."
        },
        {
            "name": "Response Time For Find Owners",
            "description": "Monitors the average response time of the Find Owners feature exceeding specified thresholds.",
            "query": "SELECT average(duration) FROM Transaction WHERE appName = 'PetClinic' AND request.uri = '/owners/find'",
            "operator": "above",
            "duration": "5",
            "threshold": "300",
            "priority": "critical",
            "rationale": "Slow response times for finding owners can severely impact user experience and indicate potential issues in query performance or backend processing."
        },
        {
            "name": "Error Rate on Update Owner",
            "description": "Tracks errors that occur during the updating of existing owner records to catch potential systemic issues.",
            "query": "SELECT percentage(count(*), WHERE error IS true) FROM Transaction WHERE appName = 'PetClinic' AND request.uri LIKE '/owners/%/edit'",
            "operator": "above",
            "duration": "10",
            "threshold": "5",
            "priority": "critical",
            "rationale": "A high error rate during owner updates could signal problems in backend implementations or data conflicts, impacting data integrity."
        }
    ],
    "policy_name": "PRISM:saurabrana/spring-petclinicAlerts"
}