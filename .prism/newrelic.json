{
    "alerts": [
        {
            "name": "Runtime Exception Triggered",
            "description": "Alert for instances where the CrashController triggers an exception.",
            "query": "SELECT count(*) FROM Log WHERE message LIKE '%controller used to showcase what happens when an exception is thrown%'",
            "operator": "above",
            "duration": "5",
            "threshold": "10",
            "priority": "critical",
            "rationale": "Repeated runtime exceptions indicate a need for immediate attention to application stability."
        },
        {
            "name": "High Cache Miss Rate",
            "description": "Monitors cache misses which may degrade performance if the service frequently pulls from the database.",
            "query": "SELECT count(*) FROM CacheMiss WHERE serviceName = 'VetService'",
            "operator": "above",
            "duration": "10",
            "threshold": "50",
            "priority": "warning",
            "rationale": "A high cache miss rate can lead to increased response times and load on the database."
        },
        {
            "name": "Database Connection Failures",
            "description": "Tracks failure in connecting to the database, which could indicate resource or configuration issues.",
            "query": "SELECT count(*) FROM Log WHERE message LIKE '%Failed to connect to database%'",
            "operator": "above",
            "duration": "5",
            "threshold": "5",
            "priority": "critical",
            "rationale": "Continuous database connection failures can result in service downtime and degraded performance."
        },
        {
            "name": "Application Error Rate",
            "description": "Monitors the overall error rate to identify systemic issues.",
            "query": "SELECT percentage(count(*), WHERE level = 'ERROR') FROM Log WHERE appName = 'PetClinic'",
            "operator": "above",
            "duration": "5",
            "threshold": "5",
            "priority": "critical",
            "rationale": "An error rate above 5% indicates recurring issues that need attention to prevent user impact."
        },
        {
            "name": "Response Time Threshold",
            "description": "Monitors if the response time exceeds acceptable thresholds, indicating performance degradation.",
            "query": "SELECT average(duration) FROM Transaction WHERE appName = 'PetClinic'",
            "operator": "above",
            "duration": "5",
            "threshold": "500",
            "priority": "critical",
            "rationale": "Response times exceeding 500ms indicate possible bottleneck issues affecting user experience."
        }
    ],
    "policy_name": "PRISM PetClinic Alerts"
}