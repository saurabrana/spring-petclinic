{
    "alerts": [
        {
            "name": "Exception Triggered",
            "description": "Monitors if specific routes trigger exceptions, indicating potential code bugs or issues.",
            "query": "SELECT count(*) FROM TransactionError WHERE appName = 'PetClinicApp' AND url = '/oups'",
            "duration": "5",
            "operator": "above",
            "threshold": "1",
            "priority": "critical",
            "rationale": "Any occurrence of an exception triggering this endpoint signifies a code issue that requires immediate attention to prevent application failure."
        },
        {
            "name": "Database Connection Errors",
            "description": "Monitors the application's ability to connect to the database successfully, critical for ensuring data integrity and availability.",
            "query": "SELECT count(*) FROM TransactionError WHERE appName = 'PetClinicApp' AND error.message LIKE '%Cannot connect to database%'",
            "duration": "10",
            "operator": "above",
            "threshold": "0",
            "priority": "critical",
            "rationale": "Inability to connect to the database can lead to application downtime and data inconsistency which must be fixed promptly."
        },
        {
            "name": "API Response Time",
            "description": "Tracks response time of API endpoints to identify latency issues.",
            "query": "SELECT average(duration) FROM Transaction WHERE appName = 'PetClinicApp'",
            "duration": "5",
            "operator": "above",
            "threshold": "200",
            "priority": "warning",
            "rationale": "Elevated response times could degrade user experience, indicating the need for performance tuning."
        },
        {
            "name": "HTTP 5xx Errors",
            "description": "Tracks server-side error statuses to catch potential backend issues.",
            "query": "SELECT percentage(count(*), WHERE httpResponseCode LIKE '5%') FROM Transaction WHERE appName = 'PetClinicApp'",
            "duration": "5",
            "operator": "above",
            "threshold": "2",
            "priority": "critical",
            "rationale": "Frequent server errors indicate failing business logic or insufficient handling of edge cases that could lead to system crashes."
        }
    ],
    "policy_name": "PRISM:saurabrana/spring-petclinicAlerts"
}